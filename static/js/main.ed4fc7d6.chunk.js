(this.webpackJsonpequations=this.webpackJsonpequations||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},14:function(e,t,n){e.exports=n(23)},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),l=n.n(c),o=(n(19),n(11)),i=n.n(o),p=(n(20),n(21),n(1)),u=n(3),s=n(8),m=n(5),d=n(12),h=n.n(d),b=n(2),y=r.a.createContext({path:"",onClick:function(){},registerActions:function(){},unregisterActions:function(){}}),E={type:"cn",idx:2,children:["1"],attributes:{type:"integer"}},f={type:"cn",idx:2,children:["0"],attributes:{type:"integer"}},x=n(4),j=function(e){var t;if("cn"===e.type&&"rational"===(null===(t=e.attributes)||void 0===t?void 0:t.type)){var n=Object(p.a)(e.children,3);n[0],n[1],n[2];e=Object(b.b)(e,"children.0",(parseInt(e.children[0])+parseInt(e.children[2])).toString())}return e},g=function(e){var t;if("cn"===e.type&&"rational"===(null===(t=e.attributes)||void 0===t?void 0:t.type)){var n=Object(p.a)(e.children,3);n[0],n[1],n[2];e=Object(b.b)(e,"children.0",(parseInt(e.children[0])-parseInt(e.children[2])).toString())}return e},v=r.a.forwardRef((function(e,t){var n=e.expr,c=e.path,l=Object(x.a)(e,["expr","path"]),o=Object(a.useContext)(y),i=o.registerActions,u=o.unregisterActions;Object(a.useEffect)((function(){var e={"+":j,"-":g};return i(c,e),function(){return u(c,e)}}),[i,u,c]);var s=Object(p.a)(n,3),m=s[0],d=(s[1],s[2]);return r.a.createElement("mjx-mfrac",{ref:t,space:"4"},r.a.createElement("mjx-frac",{type:"d"},r.a.createElement("mjx-num",null,r.a.createElement("mjx-nstrut",null),r.a.createElement(C,Object.assign({expr:[m],path:"".concat(c,".[rat].0")},l))),r.a.createElement("mjx-dbox",null,r.a.createElement("mjx-dtable",null,r.a.createElement("mjx-line",{type:"d"}),r.a.createElement("mjx-row",null,r.a.createElement("mjx-den",null,r.a.createElement("mjx-dstrut",null),r.a.createElement(C,Object.assign({expr:[d],path:"".concat(c,".[rat].2")},l)),"                            "))))))})),O=function(e){var t;return"cn"===e.type&&"integer"===(null===(t=e.attributes)||void 0===t?void 0:t.type)&&(e=Object(b.b)(e,"children.0",(parseInt(e.children[0])+1).toString())),"string"===typeof e&&(e=(parseInt(e)+1).toString()),e},k=function(e){var t;return"cn"===e.type&&"integer"===(null===(t=e.attributes)||void 0===t?void 0:t.type)&&(e=Object(b.b)(e,"children.0",(parseInt(e.children[0])-1).toString())),"string"===typeof e&&(e=(parseInt(e)-1).toString()),e},C=r.a.forwardRef((function(e,t){var n=e.expr,c=(e.p,e.path),l=Object(x.a)(e,["expr","p","path"]),o=Object(a.useContext)(y),i=o.registerActions,u=o.unregisterActions;Object(a.useEffect)((function(){var e={"+":O,"-":k};return i(c,e),function(){return u(c,e)}}),[c,i,u]);var s=c.startsWith(o.selectedPath);console.log("Number debug",n);var d=Object(p.a)(n,1)[0];return"string"===typeof d?r.a.createElement("mjx-mn",Object.assign({},l,{ref:t,onClick:function(){return o.onClick(c)},style:{backgroundColor:s?"red":"transparent"}}),Object(m.a)(d).map((function(e,t){return r.a.createElement("mjx-c",{key:t,class:"mjx-c".concat(e.charCodeAt(0).toString(16).toUpperCase())})}))):r.a.createElement("div",null,"MathNumber unknown ",JSON.stringify(n))})),S=function(e){return e={type:"apply",idx:e.idx,children:[{type:"divide",idx:0},e=Object(b.b)(e,"idx",1),Object(u.a)(Object(u.a)({},E),{},{idx:2})]}},w=r.a.forwardRef((function(e,t){var n=e.type,c=e.path,l=Object(x.a)(e,["type","path"]),o=Object(a.useContext)(y),i=o.registerActions,p=o.unregisterActions;return Object(a.useEffect)((function(){var e={"/":S};return i(c,e),function(){return p(c,e)}}),[i,p,c]),"rational"===n?r.a.createElement(v,Object.assign({ref:t,type:n,path:c},l)):r.a.createElement(C,Object.assign({ref:t,type:n,path:c},l))})),A={x:"1D465",a:"1D44E",b:"1D44F",c:"1D450"},P=r.a.forwardRef((function(e,t){var n=e.expr,c=e.path,l=e.onClick,o=Object(x.a)(e,["expr","path","onClick"]),i=Object(a.useContext)(y),p=A[n],u=c.startsWith(i.selectedPath);return console.log("*** Variable path",u),console.log("path",c),console.log("sel ",i.selectedPath),r.a.createElement("mjx-mo",Object.assign({ref:t,onClick:function(){return l(c)}},o,{style:{backgroundColor:u?"red":"transparent"}}),p?r.a.createElement("mjx-c",{class:"mjx-c".concat(p," TEX-I")}):n)})),N=function(e){var t=e.children,n=e.path;return console.log("Operator path",n),r.a.createElement("mjx-mo",{space:"4"},r.a.createElement("mjx-c",{class:"mjx-c".concat(t.charCodeAt(0).toString(16).toUpperCase())}))},I=function(e){var t=e.expr,n=e.openSymbol,a=e.closeSymbol;return r.a.createElement("mfenced",{openSymbol:n,closeSymbol:a},t.map((function(e,t){return r.a.createElement(W,{key:t,p:0,expr:e})})))},q=function(e){var t=e.expr,n=e.useBrackets,a=e.priority,c=e.symbol,l=e.path,o=e.onClick,i=e.opPath;return r.a.createElement("mjx-mrow",null,n&&r.a.createElement(N,null,"("),t.reduce((function(e,t,n){return n&&e.push(r.a.createElement(N,{key:"o-".concat(n),path:"".concat(l,".[op-").concat(c(t),"].0")},c(t))),t&&e.push(r.a.createElement(W,{key:"a-".concat(n),p:a,expr:t,path:"".concat(l,".[op-").concat(i,"].").concat(t.idx),onClick:o})),e}),[]),n&&r.a.createElement(N,null,")"))},T=function(e){var t=e.expr,n=e.newPriority,a=e.oldPriority,c=e.symbol,l=e.path,o=e.onClick,i=e.opPath;return r.a.createElement(q,{useBrackets:n<a||n===a&&"-"===c(),level:n,symbol:c,expr:t,path:l,onClick:o,opPath:i})},B={eq:function(e){var t=e.expr,n=e.priority,a=e.path,c=e.onClick;return console.log("Equation path",a),r.a.createElement(q,{useBrackets:n>1,level:n,symbol:function(){return"="},expr:t,path:a,onClick:c,opPath:"="})},divide:function(e){var t=e.expr,n=e.priority,a=e.path,c=e.onClick;console.log("Division path",a);var l=Object(p.a)(t,2),o=l[0],i=l[1];return r.a.createElement("mjx-mfrac",{space:"4"},r.a.createElement("mjx-frac",{type:"d"},r.a.createElement("mjx-num",null,r.a.createElement("mjx-nstrut",null),r.a.createElement(W,{p:n,expr:o,path:"".concat(a,".[div].").concat(o.idx),onClick:c})),r.a.createElement("mjx-dbox",null,r.a.createElement("mjx-dtable",null,r.a.createElement("mjx-line",{type:"d"}),r.a.createElement("mjx-row",null,r.a.createElement("mjx-den",null,r.a.createElement("mjx-dstrut",null),r.a.createElement(W,{p:n,expr:i,path:"".concat(a,".[div].").concat(i.idx),onClick:c})))))))},times:function(e){var t=e.expr,n=e.priority,a=e.path,c=e.onClick;return r.a.createElement(q,{useBrackets:n>3,level:n,symbol:function(e){return"cn"===e.type?"\xd7":"\u2062"},expr:t,path:a,onClick:c,opPath:"*"})},minus:function(e){var t=e.expr,n=e.priority,a=e.path,c=e.onClick;console.log("Subtraction",t);var l=t.length,o=1===l?5:2;return r.a.createElement(T,{newPriority:o,oldPriority:n,symbol:function(){return"\u2212"},expr:1===l?[void 0,t[0]]:t,path:a,onClick:c,opPath:"-"})},plus:function(e){var t=e.expr,n=e.priority,a=e.path,c=e.onClick;return r.a.createElement("mjx-mrow",null,n>2&&r.a.createElement(N,null,"("),t.reduce((function(e,t,n){var l="".concat(a,".[add].").concat(t.idx);if(n>0){var o=t.children||[];"cn"===t.type&&!o.length&&Number(t.textContent)<0?(e.push(r.a.createElement(N,{key:"op-".concat(n),path:"".concat(l,".0")},"\u2212")),e.push(r.a.createElement("mjx-mn",{key:"n-".concat(n)},Number(t.textContent)))):"apply"===t.type&&2===o.length&&"minus"===o[0].type?(e.push(r.a.createElement(N,{key:"op-".concat(n),path:"".concat(l,".0")},"\u2212")),e.push(r.a.createElement(W,{key:"a-".concat(n),priority:3,expr:o[1],path:l}))):"apply"===t.type&&o.length>2&&"times"===o[0].type&&"cn"===o[1].type&&Number(o[1].textContent)<0?(e.push(r.a.createElement(N,{key:"op-".concat(n),path:"".concat(l,".0")},"\u2212")),o[1].textContent=-Number(o[1].textContent),e.push(r.a.createElement(W,{key:"a-".concat(n),priority:3,expr:t,path:l}))):(e.push(r.a.createElement(N,{key:"op-".concat(n),path:"".concat(l,".0")},"+")),e.push(r.a.createElement(W,{key:"a-".concat(n),priority:3,expr:t,path:l,onClick:c})))}else e.push(r.a.createElement(W,{key:"a-".concat(n),priority:3,expr:t,path:l,onClick:c}));return e}),[]),n>2&&r.a.createElement(N,null,")"))},root:function(e){var t=e.expr,n=e.params,a=e.path,c=e.onClick;return 0===n.length||"degree"===n[0].type&&"2"===n[0].textContent?r.a.createElement("mjx-msqrt",{space:"3"},r.a.createElement("mjx-sqrt",null,r.a.createElement("mjx-surd",null,r.a.createElement(N,{path:"".concat(a,".[root].0")},"\u221a")),r.a.createElement("mjx-box",null,r.a.createElement(W,{priority:0,expr:t,path:"".concat(a,".[root]"),onClick:c})))):r.a.createElement("div",null,"Other root")},power:function(e){var t=e.expr,n=e.priority,c=(e.params,e.path),l=e.onClick,o=Object(p.a)(t,2),i=o[0],u=o[1],s=Object(a.useState)("0"),m=Object(p.a)(s,2),d=m[0],h=m[1],b=Object(a.useState)(null),y=Object(p.a)(b,2),E=y[0],f=y[1],x=Object(a.useState)(null),j=Object(p.a)(x,2),g=j[0],v=j[1],O=Object(a.useCallback)((function(e){v(e)}),[]),k=Object(a.useCallback)((function(e){f(e)}),[]);return Object(a.useEffect)((function(){E&&g&&h("".concat(E.getBoundingClientRect().height-g.getBoundingClientRect().height,"px"))}),[E,g]),r.a.createElement("mjx-msup",null,r.a.createElement(W,{ref:k,priority:n,expr:i,path:"".concat(c,".[pwr].").concat(i.idx),onClick:l}),r.a.createElement("mjx-script",{style:{verticalAlign:d}},r.a.createElement(W,{ref:O,priority:n,size:"s",expr:u,path:"".concat(c,".[pwr].").concat(u.idx),onClick:l})))}},D={apply:function(e){var t=e.expr,n=e.priority,a=e.path,c=e.onClick,l=null,o=[],i=[],p=[];if(t.forEach((function(e){if("string"!==typeof e){var t=e.type;"bvar"===t?i.push(e):"condition"===t||"degree"===t||"logbase"===t||"lowlimit"===t||"uplimit"===t||"interval"===t&&!o.length||"domainofapplication"===t?p.push(e):null===l?l=e:o.push(e)}})),l){var u=l.type;u="csymbol"===u?l.textContent:u;var s=B[u];return s?("minus"===u&&console.log("minus",o,t),r.a.createElement(s,{priority:n,params:p,expr:o,path:"".concat(a),onClick:c})):r.a.createElement("mjx-mrow",null,t?r.a.createElement(W,{p:0,expr:{first:l}}):r.a.createElement("mjx-mi",null,u),r.a.createElement(N,null,"\u2061"),r.a.createElement(I,{openSymbol:"(",closeSymbol:")",expr:o}))}return r.a.createElement("mjx-mrow",null)},ci:P,cn:w},R=r.a.forwardRef((function(e,t){var n=e.expr,a=e.priority,c=e.path,l=e.onClick,o=Object(x.a)(e,["expr","priority","path","onClick"]);if(!n)return null;if("string"!==typeof n){if(Array.isArray(n))return n.map((function(e,t){return r.a.createElement(R,{key:t,p:a,expr:e,path:"".concat(c,".").concat(e.idx),onClick:l})}));var i=n.type,p=D[i];return p?r.a.createElement(p,Object.assign({expr:n.children,priority:a,ref:t,path:"".concat(c),onClick:l},n.attributes?n.attributes:void 0,o)):n.children&&0===n.children.length?r.a.createElement("mjx-mi",null,i):r.a.createElement("div",null,"what now ",i," ",JSON.stringify(n))}return n})),W=R,J=function(e,t){return t=t.split(/\[[^\]]+\]/g).join("children").substr(5),Object(b.a)(e,t)},M=function(e,t,n){return t=t.split(/\[[^\]]+\]/g).join("children").substr(5),Object(b.b)(e,t,n)},X=1,F={},K=function(e){var t=e.children,n=Object(a.useState)((X++).toString()),c=Object(p.a)(n,1)[0],l=Object(a.useState)({}),o=Object(p.a)(l,2),i=o[0],d=o[1],x=Object(a.useState)(""),j=Object(p.a)(x,2),g=j[0],v=j[1],O=Object(a.useState)({}),k=Object(p.a)(O,2),C=k[0],S=k[1];r.a.Children.only(t);Object(a.useEffect)((function(){!function(){var e=h.a.renderToString(t),n=(new DOMParser).parseFromString(e,"text/xml");n=n.querySelector("math");var a={type:"root"};n.childNodes.forEach((function(e){return function e(t,n){if(1===t.nodeType){var a={type:t.localName};n.children=n.children||[],n.children.push(a),a.idx=n.children.length-1,t.attributes.length>0&&(console.log("attributes",t.attributes),a.attributes=Object.assign.apply(Object,[{}].concat(Object(m.a)(Array.from(t.attributes,(function(e){var t=e.name,n=e.value;return Object(s.a)({},t,n)})))))),t.childNodes&&t.childNodes.forEach((function(t){e(t,a)}))}else 3===t.nodeType?(n.children=n.children||[],n.children.push(t.textContent)):console.log("not found!",t)}(e,a)})),d(a.children),console.log("matchExpr",a.children)}()}),[t]);var w=Object(a.useCallback)((function(e){console.log("onClick",e),v(e)}),[v]),A=Object(a.useCallback)(function(e){return function(t,n){F[e]=F[e]||{},F[e][t]=F[e][t]||{},F[e][t]=Object(u.a)(Object(u.a)({},F[e][t]),n)}}(c),[c]),P=Object(a.useCallback)(function(e){return function(t,n){Object.keys(n).forEach((function(n){delete F[e][t][n]}))}}(c),[c]);return Object(a.useEffect)((function(){S({onClick:w,selectedPath:g,registerActions:A,unregisterActions:P}),console.log("CTX SET")}),[c,w,g,A,P]),r.a.createElement("div",{tabIndex:"0",onKeyDown:function(e){if(console.log(F[c][g]),F[c],F[c][g]&&F[c][g][e.key]){console.log("ACTIONS",F[c],g,F[c][g]);var t=J(i,g);(t=F[c][g][e.key](t))&&d(M(i,g,t))}else if(27===e.keyCode){var n=g.split(".").slice(0,-2).join(".");v(n)}else if(39===e.keyCode){var a=g.split(/\[[^\]]+\]/g).join("children").substr(5).split("."),r=parseInt(a[a.length-1])+1;a=a.slice(0,-1).join("."),Object(b.a)(i,a).some((function(e){return e.idx===r}))&&v(g.split(".").slice(0,-1).join(".")+"."+r)}else if(37===e.keyCode){var l=g.split(/\[[^\]]+\]/g).join("children").substr(5).split("."),o=parseInt(l[l.length-1])-1;if(o>0)l=l.slice(0,-1).join("."),Object(b.a)(i,l).some((function(e){return e.idx===o}))&&v(g.split(".").slice(0,-1).join(".")+"."+o)}else if("+"===e.key){var p=J(i,g);if("apply"===p.type||"ci"===p.type){var s={type:"apply",idx:p.idx,children:[{type:"plus",idx:0},p=Object(b.b)(p,"idx",1),Object(u.a)(Object(u.a)({},f),{},{idx:2})]};d(M(i,g,s))}}else if("^"===e.key){var m=J(i,g),h={type:"apply",idx:m.idx,children:[{type:"power",idx:0},m=Object(b.b)(m,"idx",1),Object(u.a)(Object(u.a)({},E),{},{idx:2})]};d(M(i,g,h))}else if("*"===e.key){var y=J(i,g),x={type:"apply",idx:y.idx,children:[{type:"times",idx:0},y=Object(b.b)(y,"idx",1),Object(u.a)(Object(u.a)({},E),{},{idx:2})]};d(M(i,g,x))}else 83===e.keyCode||(console.log("KEYCODE",e.key),console.log(e))}},r.a.createElement("mjx-container",{jax:"CHTML",display:"true"},r.a.createElement("mjx-math",{display:"true",class:"MJX-TEX"},r.a.createElement(y.Provider,{value:C},r.a.createElement(W,{expr:i,priotiry:0,path:"math",onClick:function(e){console.log("onClick",e),v(e)}})))),r.a.createElement("button",{onClick:function(){var e=g.split(/\[[^\]]+\]/g).join("children").substr(5);e=e.split(".").slice(0,-1).join(".");var t=Object(b.a)(i,e),n=[t[0]].concat(Object(m.a)(t.slice(1).reverse()));n.forEach((function(e,t){return e.idx=t})),d(Object(b.b)(i,e,n))}},"SWAP sel"),r.a.createElement("button",{onClick:function(){var e=i[0].children;i[0]={type:"apply",children:[e[0],e[2],e[1]]},d(Object(m.a)(i))}},"SWAP div"))};var L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:i.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null,"Edit ",r.a.createElement("code",null,"src/App.js")," and save to reload."),r.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React"),r.a.createElement(K,null,r.a.createElement("math",{display:"block"},r.a.createElement("apply",null,r.a.createElement("eq",null),r.a.createElement("ci",null,"x"),r.a.createElement("apply",null,r.a.createElement("divide",null),r.a.createElement("apply",null,r.a.createElement("plus",null),r.a.createElement("apply",null,r.a.createElement("minus",null),r.a.createElement("ci",null,"b")),r.a.createElement("apply",null,r.a.createElement("root",null,r.a.createElement("degree",null,"2")),r.a.createElement("apply",null,r.a.createElement("minus",null),r.a.createElement("apply",null,r.a.createElement("power",null),r.a.createElement("ci",null,"b"),r.a.createElement("cn",{type:"integer"},"2")),r.a.createElement("apply",null,r.a.createElement("times",null),r.a.createElement("cn",{type:"integer"},"4"),r.a.createElement("ci",null,"a"),r.a.createElement("ci",null,"c"))))),r.a.createElement("apply",null,r.a.createElement("times",null),r.a.createElement("cn",{type:"rational"},"2",r.a.createElement("sep",null),"3"),r.a.createElement("ci",null,"a")))))),r.a.createElement(K,null,r.a.createElement("math",null,r.a.createElement("apply",null,r.a.createElement("eq",null),r.a.createElement("ci",null,"x"),r.a.createElement("cn",{type:"integer"},"0"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.ed4fc7d6.chunk.js.map